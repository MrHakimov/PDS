\section{Взаимное исключение в распределённой системе. Алгоритм обедающих философов.}

\begin{definition}
    В частном случае ресурсы -- вилки, процессы -- философы, граф конфликтов -- кольцо.
\end{definition}

\begin{theorem}
    В ориентированном графе без циклов всегда есть исток.
\end{theorem}

\begin{theorem}
    Если у истока перевернуть все ребра, то граф останется ациклическим.
\end{theorem}

\begin{algorithm}(Алгоритм обедающих философов)
\begin{itemize}
    \item Философ владеет вилкой, если ребро в графе конфликтов исходит из его вершины.
    \item Философ может принять пищу, если владеет обеими вилками, т.е. он исток.
    \item После еды вилки надо отдать (ленивый способ):
        \begin{itemize}
            \item После еды вилки помечаются грязными.
            \item Моем вилки и отдаём их по запросу, даже если сами хотим есть.
            \item Чистые вилки не отдаём, если сами хотим есть. Ожидаем все вилки, 
                едим, отдаем, если был запрос.
        \end{itemize}
\end{itemize}
\end{algorithm}

\begin{algorithm}(Обобщение алгоритма обедающих философов на произвольный граф)
\begin{itemize}
    \item Взаимное исключение эквивалентно полному графу конфликтов (ребро
        между каждой парой процессов).
    \item При инициализации вилки раздаются в каком-то порядке (например,
        по порядку id процессов).
\end{itemize}
\end{algorithm}

\begin{remark} (Результат)
    \begin{itemize}
        \item 0 сообщений на повторный заход в критическую секцию.
        \item В худшем случае $2n-2$ сообщения.
        \item Количество сообщений пропорционально числу желающих попасть в 
            критическую секцию.
        \item Отсутствие \textit{deadlock}, т.к. поддерживается ацикличность графа.
    \end{itemize}
\end{remark}

