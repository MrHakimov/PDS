\section{Общий порядок (total order). Алгоритм Скина.}

\textit{Первую часть вопроса см. в предыдущем билете.}

\begin{algorithm}(Скин)
    
    Модифицируем алгоритм Лампорта. Для этого алгоритма не требуется FIFO порядок 
    на сообщениях, и он умеет делать multicast-сообщения.
    \begin{itemize}
        \item Пусть процесс $P$ хочет сделать рассылку. В таком случае, он
            шлет всем тем, кому надо, \texttt{request}, приписывая к нему свое
            логическое время в качестве \textit{предварительного} билета.
        \item Все процессы, как и в алгоритме Лампорта, имеют очередь сообщений,
            приоритетную по билетам.
        \item Если обрабатываемое сообщение -- запрос на рассылку, то автору 
            отправляется \texttt{ok} (аналогично алгоритму Лампорта).
        \item Как только отправитель получает все \texttt{ok}, он отправляет настоящие
            сообщения, приписывая к ним текущее логическое время в качестве
            \textit{финального} билета. Эти сообщения обрабатываются другими 
            процессами в общем порядке, приоритетном по номеру билета.
        \item Сообщения из рассылки обрабатываются процессами как только доходят
            до вершины очереди.
    \end{itemize}
\end{algorithm}
